/* ── Cyber Columns — Galaxy Edition ── */

/* ===== Container & Background ===== */
.cyber-columns-container {
  position: relative;
  overflow: hidden;
  background: radial-gradient(ellipse at 50% 20%, hsl(270 60% 8%) 0%, hsl(240 40% 4%) 40%, hsl(0 0% 0%) 100%);
}

/* Deep space starfield */
.cc-starfield {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.cc-starfield::before,
.cc-starfield::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(1px 1px at 10% 20%, hsl(0 0% 100% / 0.8), transparent),
    radial-gradient(1px 1px at 25% 45%, hsl(0 0% 100% / 0.6), transparent),
    radial-gradient(1.5px 1.5px at 40% 15%, hsl(199 100% 80% / 0.9), transparent),
    radial-gradient(1px 1px at 55% 65%, hsl(0 0% 100% / 0.5), transparent),
    radial-gradient(1px 1px at 70% 30%, hsl(330 100% 80% / 0.7), transparent),
    radial-gradient(1.5px 1.5px at 85% 50%, hsl(0 0% 100% / 0.8), transparent),
    radial-gradient(1px 1px at 15% 75%, hsl(270 80% 80% / 0.6), transparent),
    radial-gradient(1px 1px at 90% 80%, hsl(0 0% 100% / 0.5), transparent),
    radial-gradient(1px 1px at 50% 90%, hsl(199 100% 80% / 0.7), transparent),
    radial-gradient(1.5px 1.5px at 35% 55%, hsl(0 0% 100% / 0.9), transparent),
    radial-gradient(1px 1px at 60% 10%, hsl(0 0% 100% / 0.6), transparent),
    radial-gradient(1px 1px at 75% 85%, hsl(330 80% 80% / 0.5), transparent),
    radial-gradient(1px 1px at 5% 50%, hsl(0 0% 100% / 0.7), transparent),
    radial-gradient(1px 1px at 95% 15%, hsl(0 0% 100% / 0.8), transparent),
    radial-gradient(2px 2px at 48% 35%, hsl(45 100% 80% / 0.9), transparent);
  animation: cc-twinkle 4s ease-in-out infinite alternate;
}

.cc-starfield::after {
  background-image:
    radial-gradient(1px 1px at 20% 30%, hsl(0 0% 100% / 0.6), transparent),
    radial-gradient(1.5px 1.5px at 45% 70%, hsl(199 80% 70% / 0.8), transparent),
    radial-gradient(1px 1px at 65% 20%, hsl(0 0% 100% / 0.7), transparent),
    radial-gradient(1px 1px at 80% 55%, hsl(330 100% 70% / 0.6), transparent),
    radial-gradient(1px 1px at 30% 85%, hsl(0 0% 100% / 0.5), transparent),
    radial-gradient(1px 1px at 55% 40%, hsl(270 80% 70% / 0.7), transparent),
    radial-gradient(2px 2px at 12% 60%, hsl(45 100% 70% / 0.8), transparent),
    radial-gradient(1px 1px at 88% 35%, hsl(0 0% 100% / 0.9), transparent),
    radial-gradient(1px 1px at 42% 5%, hsl(199 100% 90% / 0.6), transparent),
    radial-gradient(1px 1px at 72% 75%, hsl(0 0% 100% / 0.5), transparent);
  animation: cc-twinkle 5s ease-in-out 1s infinite alternate-reverse;
}

@keyframes cc-twinkle {
  0% { opacity: 0.6; }
  100% { opacity: 1; }
}

/* Purple nebula mist */
.cc-nebula {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(ellipse 60% 40% at 30% 30%, hsl(270 60% 25% / 0.25), transparent),
    radial-gradient(ellipse 50% 50% at 70% 60%, hsl(330 60% 20% / 0.2), transparent),
    radial-gradient(ellipse 40% 30% at 50% 80%, hsl(199 60% 20% / 0.15), transparent);
  animation: cc-nebula-drift 12s ease-in-out infinite alternate;
}

@keyframes cc-nebula-drift {
  0% { transform: translate(0, 0) scale(1); opacity: 0.7; }
  100% { transform: translate(10px, -10px) scale(1.05); opacity: 1; }
}

/* Floating particles */
.cc-particles {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.cc-particle {
  position: absolute;
  width: 3px;
  height: 3px;
  border-radius: 50%;
  animation: cc-float-up linear infinite;
}

@keyframes cc-float-up {
  0% { transform: translateY(100vh) scale(0); opacity: 0; }
  10% { opacity: 1; transform: translateY(90vh) scale(1); }
  90% { opacity: 0.6; }
  100% { transform: translateY(-10vh) scale(0.3); opacity: 0; }
}

/* Orbit ring */
.cc-orbit-ring {
  position: absolute;
  top: 15%;
  left: 50%;
  width: 500px;
  height: 160px;
  margin-left: -250px;
  border-radius: 50%;
  border: 1.5px solid hsl(300 80% 60% / 0.15);
  box-shadow:
    0 0 20px hsl(300 80% 60% / 0.1),
    inset 0 0 20px hsl(199 80% 60% / 0.05);
  transform: perspective(600px) rotateX(65deg);
  animation: cc-orbit-spin 20s linear infinite;
  pointer-events: none;
}

@keyframes cc-orbit-spin {
  0% { transform: perspective(600px) rotateX(65deg) rotateZ(0deg); }
  100% { transform: perspective(600px) rotateX(65deg) rotateZ(360deg); }
}

/* ===== Galaxy Title ===== */
.cc-title-cyber {
  font-family: 'Georgia', serif;
  font-style: italic;
  font-weight: 700;
  font-size: 3rem;
  background: linear-gradient(180deg, hsl(330 100% 70%), hsl(330 100% 55%));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 0 15px hsl(330 100% 60% / 0.6)) drop-shadow(0 0 30px hsl(330 100% 60% / 0.3));
  line-height: 1;
}

.cc-title-columns {
  font-family: 'Arial Black', 'Impact', sans-serif;
  font-weight: 900;
  font-size: 3.5rem;
  letter-spacing: 0.1em;
  background: linear-gradient(180deg, hsl(220 80% 80%), hsl(270 60% 60%), hsl(330 80% 60%));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 0 10px hsl(220 80% 70% / 0.5)) drop-shadow(0 2px 0 hsl(0 0% 0% / 0.5));
  line-height: 1.1;
}

/* Title sparkles */
.cc-title-sparkle {
  position: absolute;
  width: 6px;
  height: 6px;
  background: hsl(0 0% 100%);
  border-radius: 50%;
  box-shadow: 0 0 6px 2px hsl(0 0% 100% / 0.8);
  animation: cc-sparkle 2s ease-in-out infinite;
}

@keyframes cc-sparkle {
  0%, 100% { transform: scale(0); opacity: 0; }
  50% { transform: scale(1); opacity: 1; }
}

/* ===== Board Frame — Glass Panel ===== */
.cyber-columns-board {
  position: relative;
  border-radius: 0.75rem;
  background: hsl(240 30% 6% / 0.6);
  backdrop-filter: blur(12px);
  overflow: hidden;
}

/* Gradient neon border — brighter like reference */
.cyber-columns-board::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 0.75rem;
  padding: 2.5px;
  background: linear-gradient(180deg, hsl(199 100% 55% / 0.8), hsl(270 60% 55% / 0.4), hsl(330 100% 65% / 0.8));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

/* Corner glow accents */
.cyber-columns-board::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 0.75rem;
  background:
    radial-gradient(circle at 0% 0%, hsl(199 100% 50% / 0.2), transparent 30%),
    radial-gradient(circle at 100% 0%, hsl(330 100% 60% / 0.2), transparent 30%),
    radial-gradient(circle at 0% 100%, hsl(270 60% 50% / 0.15), transparent 30%),
    radial-gradient(circle at 100% 100%, hsl(199 100% 50% / 0.15), transparent 30%);
  pointer-events: none;
}

/* Grid cell background */
.cc-grid-cell {
  border: 1px solid hsl(240 40% 40% / 0.08);
  background: hsl(240 20% 12% / 0.2);
  border-radius: 50%;
}

/* ===== Gem Styles — Realistic Crystal Sphere Orbs ===== */
.cyber-gem {
  position: relative;
  border-radius: 50%;
  transition: opacity 0.15s ease, transform 0.15s ease;
  overflow: visible;
}

/* Top specular highlight — bright crescent for realistic 3D sphere */
.cyber-gem::after {
  content: '';
  position: absolute;
  top: 8%;
  left: 18%;
  width: 48%;
  height: 32%;
  border-radius: 50%;
  background: linear-gradient(
    175deg,
    hsl(0 0% 100% / 0.95) 0%,
    hsl(0 0% 100% / 0.6) 25%,
    hsl(0 0% 100% / 0.15) 55%,
    transparent 100%
  );
  pointer-events: none;
  z-index: 3;
  filter: blur(0.5px);
}

/* Secondary bottom-right reflection for realism */
.cyber-gem::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 50%;
  pointer-events: none;
  z-index: 2;
  animation: cc-gem-pulse 3s ease-in-out infinite;
}

@keyframes cc-gem-pulse {
  0%, 100% {
    box-shadow:
      inset 0 0 10px hsl(0 0% 100% / 0.08),
      inset 0 -8px 16px hsl(0 0% 0% / 0.4),
      inset 4px 4px 8px hsl(0 0% 100% / 0.05),
      inset -2px 2px 4px hsl(0 0% 100% / 0.03);
  }
  50% {
    box-shadow:
      inset 0 0 20px hsl(0 0% 100% / 0.25),
      inset 0 -8px 16px hsl(0 0% 0% / 0.3),
      inset 4px 4px 8px hsl(0 0% 100% / 0.1),
      inset -2px 2px 4px hsl(0 0% 100% / 0.08);
  }
}

/* ── Plasma Core (Blue) — deep rich sapphire sphere ── */
.cyber-gem--energy {
  background:
    radial-gradient(circle at 30% 22%, hsl(200 100% 92%) 0%, transparent 28%),
    radial-gradient(circle at 65% 72%, hsl(220 100% 25%) 0%, transparent 45%),
    radial-gradient(circle at 42% 40%, hsl(210 100% 70%) 0%, transparent 55%),
    radial-gradient(circle at 50% 50%, hsl(200 100% 55%), hsl(225 100% 25%));
  box-shadow:
    0 0 12px 3px hsl(199 100% 60% / 0.9),
    0 0 30px 6px hsl(199 100% 50% / 0.5),
    0 0 60px 12px hsl(199 100% 50% / 0.2),
    0 4px 8px hsl(0 0% 0% / 0.5),
    inset 0 2px 4px hsl(0 0% 100% / 0.25);
  border: 1px solid hsl(199 100% 75% / 0.4);
}

/* ── Nova Shard (Pink/Magenta) — hot gem like reference ── */
.cyber-gem--data {
  background:
    radial-gradient(circle at 30% 22%, hsl(330 100% 95%) 0%, transparent 28%),
    radial-gradient(circle at 65% 72%, hsl(340 100% 25%) 0%, transparent 45%),
    radial-gradient(circle at 42% 40%, hsl(335 100% 65%) 0%, transparent 55%),
    radial-gradient(circle at 50% 50%, hsl(330 100% 60%), hsl(345 100% 25%));
  box-shadow:
    0 0 12px 3px hsl(330 100% 65% / 0.9),
    0 0 30px 6px hsl(330 100% 55% / 0.5),
    0 0 60px 12px hsl(330 100% 55% / 0.2),
    0 4px 8px hsl(0 0% 0% / 0.5),
    inset 0 2px 4px hsl(0 0% 100% / 0.25);
  border: 1px solid hsl(330 100% 75% / 0.4);
}

/* ── Quantum Orb (Purple) — deep amethyst sphere ── */
.cyber-gem--quantum {
  background:
    radial-gradient(circle at 30% 22%, hsl(275 85% 90%) 0%, transparent 28%),
    radial-gradient(circle at 65% 72%, hsl(260 80% 20%) 0%, transparent 45%),
    radial-gradient(circle at 42% 40%, hsl(270 80% 60%) 0%, transparent 55%),
    radial-gradient(circle at 50% 50%, hsl(270 80% 55%), hsl(260 80% 22%));
  box-shadow:
    0 0 12px 3px hsl(270 80% 60% / 0.9),
    0 0 30px 6px hsl(270 80% 50% / 0.5),
    0 0 60px 12px hsl(270 80% 50% / 0.2),
    0 4px 8px hsl(0 0% 0% / 0.5),
    inset 0 2px 4px hsl(0 0% 100% / 0.25);
  border: 1px solid hsl(270 80% 70% / 0.4);
}

/* ── Ion Fragment (Cyan/Teal) — ice crystal ── */
.cyber-gem--circuit {
  background:
    radial-gradient(circle at 30% 22%, hsl(180 100% 92%) 0%, transparent 28%),
    radial-gradient(circle at 65% 72%, hsl(190 80% 22%) 0%, transparent 45%),
    radial-gradient(circle at 42% 40%, hsl(180 90% 55%) 0%, transparent 55%),
    radial-gradient(circle at 50% 50%, hsl(180 90% 50%), hsl(195 80% 22%));
  box-shadow:
    0 0 12px 3px hsl(180 90% 55% / 0.9),
    0 0 30px 6px hsl(180 90% 45% / 0.5),
    0 0 60px 12px hsl(180 90% 45% / 0.2),
    0 4px 8px hsl(0 0% 0% / 0.5),
    inset 0 2px 4px hsl(0 0% 100% / 0.25);
  border: 1px solid hsl(180 90% 70% / 0.4);
}

/* ── Stellar Burst (Gold) — rare golden crystal ── */
.cyber-gem--bonus {
  background:
    radial-gradient(circle at 30% 22%, hsl(50 100% 97%) 0%, transparent 25%),
    radial-gradient(circle at 65% 72%, hsl(35 100% 25%) 0%, transparent 45%),
    radial-gradient(circle at 42% 40%, hsl(45 100% 65%) 0%, transparent 55%),
    radial-gradient(circle at 50% 50%, hsl(45 100% 60%), hsl(30 100% 25%));
  box-shadow:
    0 0 14px 4px hsl(45 100% 55% / 1),
    0 0 35px 8px hsl(45 100% 50% / 0.6),
    0 0 70px 14px hsl(45 100% 45% / 0.25),
    0 4px 8px hsl(0 0% 0% / 0.5),
    inset 0 2px 4px hsl(0 0% 100% / 0.35);
  border: 1px solid hsl(45 100% 75% / 0.5);
}
.cyber-gem--bonus::before {
  animation: cc-gem-pulse 1.2s ease-in-out infinite;
}

/* ===== MATCH BURST — Vivid color-matched supernova ===== */
.cyber-gem--clearing {
  animation: cc-gem-explode 0.6s ease-out forwards;
  z-index: 10;
}

/* ── Combo tier scaling ── */
.cc-combo-1 { --combo-scale: 1; --combo-duration: 0.6s; --combo-brightness: 1; }
.cc-combo-2 { --combo-scale: 1.6; --combo-duration: 0.75s; --combo-brightness: 1.4; }
.cc-combo-3 { --combo-scale: 2.4; --combo-duration: 0.9s; --combo-brightness: 1.8; }
.cc-combo-4 { --combo-scale: 3.2; --combo-duration: 1.1s; --combo-brightness: 2.2; }

.cc-combo-2.cyber-gem--clearing {
  animation: cc-gem-explode-big 0.75s ease-out forwards;
}
.cc-combo-3.cyber-gem--clearing,
.cc-combo-4.cyber-gem--clearing {
  animation: cc-gem-explode-mega 1s ease-out forwards;
}

/* Expanding color burst ring */
.cyber-gem--clearing::before {
  animation: cc-burst-ring var(--combo-duration, 0.65s) ease-out forwards !important;
  border-radius: 50% !important;
  inset: calc(-100% * var(--combo-scale, 1)) !important;
  box-shadow: none !important;
}

/* Color sparkle rays */
.cyber-gem--clearing::after {
  animation: cc-burst-sparkle var(--combo-duration, 0.6s) ease-out forwards !important;
  width: calc(300% * var(--combo-scale, 1)) !important;
  height: calc(300% * var(--combo-scale, 1)) !important;
  top: calc(-100% * var(--combo-scale, 1)) !important;
  left: calc(-100% * var(--combo-scale, 1)) !important;
  border-radius: 50% !important;
  filter: blur(0.3px) brightness(var(--combo-brightness, 1)) !important;
}

/* ── Blue supernova ── */
.cyber-gem--energy.cyber-gem--clearing::before {
  background: radial-gradient(circle, hsl(199 100% 95% / 1), hsl(199 100% 70% / 0.8), hsl(210 100% 55% / 0.4), transparent 65%) !important;
}
.cyber-gem--energy.cyber-gem--clearing::after {
  background: conic-gradient(from 0deg, hsl(199 100% 90% / 1) 0deg, hsl(210 100% 70% / 0.5) 5deg, transparent 10deg, transparent 35deg, hsl(199 100% 85% / 0.9) 40deg, hsl(210 100% 65% / 0.4) 45deg, transparent 50deg, transparent 80deg, hsl(199 100% 90% / 0.8) 85deg, transparent 95deg, transparent 125deg, hsl(210 100% 85% / 0.9) 130deg, transparent 140deg, transparent 170deg, hsl(199 100% 90% / 0.8) 175deg, transparent 185deg, transparent 215deg, hsl(210 100% 85% / 0.9) 220deg, transparent 230deg, transparent 260deg, hsl(199 100% 90% / 0.8) 265deg, transparent 275deg, transparent 305deg, hsl(210 100% 85% / 0.9) 310deg, transparent 320deg, transparent 350deg, hsl(199 100% 80% / 0.7) 355deg, transparent 360deg) !important;
}

/* ── Pink supernova ── */
.cyber-gem--data.cyber-gem--clearing::before {
  background: radial-gradient(circle, hsl(330 100% 95% / 1), hsl(330 100% 72% / 0.8), hsl(340 100% 55% / 0.4), transparent 65%) !important;
}
.cyber-gem--data.cyber-gem--clearing::after {
  background: conic-gradient(from 0deg, hsl(330 100% 92% / 1) 0deg, hsl(340 100% 70% / 0.5) 5deg, transparent 10deg, transparent 35deg, hsl(330 100% 88% / 0.9) 40deg, hsl(340 100% 65% / 0.4) 45deg, transparent 50deg, transparent 80deg, hsl(330 100% 92% / 0.8) 85deg, transparent 95deg, transparent 125deg, hsl(340 100% 88% / 0.9) 130deg, transparent 140deg, transparent 170deg, hsl(330 100% 92% / 0.8) 175deg, transparent 185deg, transparent 215deg, hsl(340 100% 88% / 0.9) 220deg, transparent 230deg, transparent 260deg, hsl(330 100% 92% / 0.8) 265deg, transparent 275deg, transparent 305deg, hsl(340 100% 88% / 0.9) 310deg, transparent 320deg, transparent 350deg, hsl(330 100% 85% / 0.7) 355deg, transparent 360deg) !important;
}

/* ── Purple supernova ── */
.cyber-gem--quantum.cyber-gem--clearing::before {
  background: radial-gradient(circle, hsl(270 85% 92% / 1), hsl(270 80% 68% / 0.8), hsl(260 80% 50% / 0.4), transparent 65%) !important;
}
.cyber-gem--quantum.cyber-gem--clearing::after {
  background: conic-gradient(from 0deg, hsl(270 85% 90% / 1) 0deg, hsl(280 80% 68% / 0.5) 5deg, transparent 10deg, transparent 35deg, hsl(270 85% 85% / 0.9) 40deg, hsl(260 80% 62% / 0.4) 45deg, transparent 50deg, transparent 80deg, hsl(270 85% 90% / 0.8) 85deg, transparent 95deg, transparent 125deg, hsl(280 80% 85% / 0.9) 130deg, transparent 140deg, transparent 170deg, hsl(270 85% 90% / 0.8) 175deg, transparent 185deg, transparent 215deg, hsl(280 80% 85% / 0.9) 220deg, transparent 230deg, transparent 260deg, hsl(270 85% 90% / 0.8) 265deg, transparent 275deg, transparent 305deg, hsl(280 80% 85% / 0.9) 310deg, transparent 320deg, transparent 350deg, hsl(270 80% 82% / 0.7) 355deg, transparent 360deg) !important;
}

/* ── Cyan supernova ── */
.cyber-gem--circuit.cyber-gem--clearing::before {
  background: radial-gradient(circle, hsl(180 95% 92% / 1), hsl(180 90% 65% / 0.8), hsl(185 85% 50% / 0.4), transparent 65%) !important;
}
.cyber-gem--circuit.cyber-gem--clearing::after {
  background: conic-gradient(from 0deg, hsl(180 95% 90% / 1) 0deg, hsl(185 90% 68% / 0.5) 5deg, transparent 10deg, transparent 35deg, hsl(180 95% 85% / 0.9) 40deg, hsl(185 90% 62% / 0.4) 45deg, transparent 50deg, transparent 80deg, hsl(180 95% 90% / 0.8) 85deg, transparent 95deg, transparent 125deg, hsl(185 90% 85% / 0.9) 130deg, transparent 140deg, transparent 170deg, hsl(180 95% 90% / 0.8) 175deg, transparent 185deg, transparent 215deg, hsl(185 90% 85% / 0.9) 220deg, transparent 230deg, transparent 260deg, hsl(180 95% 90% / 0.8) 265deg, transparent 275deg, transparent 305deg, hsl(185 90% 85% / 0.9) 310deg, transparent 320deg, transparent 350deg, hsl(180 90% 82% / 0.7) 355deg, transparent 360deg) !important;
}

/* ── Gold MEGA supernova ── */
.cyber-gem--bonus.cyber-gem--clearing::before {
  background: radial-gradient(circle, hsl(50 100% 97% / 1), hsl(45 100% 75% / 0.9), hsl(40 100% 55% / 0.5), transparent 60%) !important;
}
.cyber-gem--bonus.cyber-gem--clearing::after {
  background: conic-gradient(from 0deg, hsl(45 100% 92% / 1) 0deg, hsl(40 100% 75% / 0.6) 5deg, transparent 10deg, transparent 25deg, hsl(50 100% 88% / 0.95) 28deg, transparent 35deg, transparent 55deg, hsl(45 100% 90% / 0.9) 58deg, transparent 65deg, transparent 85deg, hsl(40 100% 88% / 0.9) 88deg, transparent 95deg, transparent 115deg, hsl(50 100% 90% / 0.9) 118deg, transparent 125deg, transparent 145deg, hsl(45 100% 88% / 0.9) 148deg, transparent 155deg, transparent 175deg, hsl(40 100% 90% / 0.9) 178deg, transparent 185deg, transparent 205deg, hsl(50 100% 88% / 0.9) 208deg, transparent 215deg, transparent 235deg, hsl(45 100% 90% / 0.9) 238deg, transparent 245deg, transparent 265deg, hsl(40 100% 88% / 0.9) 268deg, transparent 275deg, transparent 295deg, hsl(50 100% 90% / 0.9) 298deg, transparent 305deg, transparent 325deg, hsl(45 100% 88% / 0.9) 328deg, transparent 335deg, transparent 355deg, hsl(40 100% 85% / 0.8) 358deg, transparent 360deg) !important;
  width: 400% !important;
  height: 400% !important;
  top: -150% !important;
  left: -150% !important;
}

@keyframes cc-burst-ring {
  0% { transform: scale(0.1); opacity: 1; filter: brightness(2); }
  30% { transform: scale(2); opacity: 0.9; filter: brightness(1.5); }
  60% { transform: scale(3.5); opacity: 0.5; filter: brightness(1.2); }
  100% { transform: scale(5.5); opacity: 0; filter: brightness(1); }
}

@keyframes cc-burst-sparkle {
  0% { transform: scale(0.1) rotate(0deg); opacity: 1; filter: brightness(2); }
  40% { transform: scale(1.4) rotate(20deg); opacity: 0.9; filter: brightness(1.5); }
  100% { transform: scale(4) rotate(60deg); opacity: 0; filter: brightness(1); }
}

/* ===== Active piece glow ===== */
.cc-gem-active {
  animation: cc-gem-enter 0.2s ease-out;
}

@keyframes cc-gem-enter {
  0% { opacity: 0.6; transform: translateY(-3px) scale(0.9); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes cc-gem-explode {
  0% { transform: scale(1); opacity: 1; filter: brightness(1) saturate(1); }
  10% { transform: scale(1.8); filter: brightness(4) saturate(2); }
  25% { transform: scale(1.5); opacity: 0.9; filter: brightness(3) saturate(1.5); }
  50% { transform: scale(1.2); opacity: 0.6; filter: brightness(2) saturate(1.2); }
  100% { transform: scale(0); opacity: 0; filter: brightness(8) saturate(0.5); }
}

@keyframes cc-gem-explode-big {
  0% { transform: scale(1); opacity: 1; filter: brightness(1) saturate(1); }
  8% { transform: scale(2.2); filter: brightness(5) saturate(2.5); }
  20% { transform: scale(1.8); opacity: 0.9; filter: brightness(3.5) saturate(2); }
  50% { transform: scale(1.4); opacity: 0.6; filter: brightness(2.5) saturate(1.5); }
  100% { transform: scale(0); opacity: 0; filter: brightness(10) saturate(0.5); }
}

@keyframes cc-gem-explode-mega {
  0% { transform: scale(1); opacity: 1; filter: brightness(1) saturate(1); }
  5% { transform: scale(3); filter: brightness(8) saturate(3); }
  15% { transform: scale(2.5); opacity: 1; filter: brightness(5) saturate(2); }
  35% { transform: scale(2); opacity: 0.8; filter: brightness(3) saturate(1.5); }
  60% { transform: scale(1.5); opacity: 0.5; filter: brightness(2) saturate(1.2); }
  100% { transform: scale(0); opacity: 0; filter: brightness(12) saturate(0.3); }
}

/* Shockwave ring for chain 3+ */
.cc-shockwave {
  position: absolute;
  inset: -200%;
  border-radius: 50%;
  border: 3px solid hsl(0 0% 100% / 0.8);
  pointer-events: none;
  z-index: 25;
  animation: cc-shockwave-expand 0.8s ease-out forwards;
  box-shadow:
    0 0 20px 5px hsl(0 0% 100% / 0.4),
    inset 0 0 15px 3px hsl(0 0% 100% / 0.2);
}

@keyframes cc-shockwave-expand {
  0% { transform: scale(0.1); opacity: 1; border-width: 4px; }
  30% { transform: scale(1.5); opacity: 0.8; border-width: 3px; }
  60% { transform: scale(3); opacity: 0.4; border-width: 2px; }
  100% { transform: scale(5); opacity: 0; border-width: 1px; }
}

/* Match flash overlay */
.cc-match-flash {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: hsl(0 0% 100% / 0.9);
  animation: cc-flash 0.25s ease-out forwards;
  pointer-events: none;
}

@keyframes cc-flash {
  0% { opacity: 1; transform: scale(1); }
  100% { opacity: 0; transform: scale(1.4); }
}

/* ===== Color burst overlay per gem type ===== */
.cc-burst-color {
  position: absolute;
  inset: calc(-120% * var(--combo-scale, 1));
  border-radius: 50%;
  pointer-events: none;
  z-index: 15;
  animation: cc-color-burst var(--combo-duration, 0.55s) ease-out forwards;
}

.cc-burst-color--energy {
  background: radial-gradient(circle,
    hsl(199 100% 90% / 0.8) 0%,
    hsl(210 100% 70% / 0.5) 25%,
    hsl(199 100% 50% / 0.3) 45%,
    transparent 65%);
  box-shadow: 0 0 30px 10px hsl(199 100% 60% / 0.6);
}
.cc-burst-color--data {
  background: radial-gradient(circle,
    hsl(330 100% 92% / 0.8) 0%,
    hsl(340 100% 72% / 0.5) 25%,
    hsl(330 100% 50% / 0.3) 45%,
    transparent 65%);
  box-shadow: 0 0 30px 10px hsl(330 100% 60% / 0.6);
}
.cc-burst-color--quantum {
  background: radial-gradient(circle,
    hsl(270 85% 90% / 0.8) 0%,
    hsl(280 80% 68% / 0.5) 25%,
    hsl(270 80% 48% / 0.3) 45%,
    transparent 65%);
  box-shadow: 0 0 30px 10px hsl(270 80% 60% / 0.6);
}
.cc-burst-color--circuit {
  background: radial-gradient(circle,
    hsl(180 95% 90% / 0.8) 0%,
    hsl(185 90% 68% / 0.5) 25%,
    hsl(180 90% 48% / 0.3) 45%,
    transparent 65%);
  box-shadow: 0 0 30px 10px hsl(180 90% 55% / 0.6);
}
.cc-burst-color--bonus {
  background: radial-gradient(circle,
    hsl(45 100% 95% / 0.9) 0%,
    hsl(40 100% 72% / 0.6) 25%,
    hsl(45 100% 50% / 0.3) 45%,
    transparent 60%);
  box-shadow: 0 0 40px 15px hsl(45 100% 55% / 0.7);
}

@keyframes cc-color-burst {
  0% { transform: scale(0.1); opacity: 1; }
  30% { transform: scale(1.5); opacity: 0.9; }
  60% { transform: scale(2.5); opacity: 0.5; }
  100% { transform: scale(4); opacity: 0; }
}

/* ===== Electric Arc Animation — Cyber Lightning ===== */
.cc-electric-arc {
  position: absolute;
  pointer-events: none;
  z-index: 20;
  border-radius: 50%;
}

/* Ring 1 — outer electric pulse (cyan) */
.cc-electric-arc--1 {
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  border: 2.5px solid hsl(199 100% 70% / 0);
  animation: cc-arc-pulse-1 0.6s ease-out forwards;
  box-shadow:
    0 0 12px 3px hsl(199 100% 75% / 0.7),
    0 0 25px 5px hsl(199 100% 60% / 0.3),
    inset 0 0 10px 2px hsl(199 100% 70% / 0.4);
}

/* Ring 2 — inner electric pulse (pink/purple, rotated) */
.cc-electric-arc--2 {
  top: -30%;
  left: -30%;
  width: 160%;
  height: 160%;
  border: 2px solid hsl(330 100% 70% / 0);
  animation: cc-arc-pulse-2 0.55s 0.03s ease-out forwards;
  box-shadow:
    0 0 10px 2px hsl(330 100% 70% / 0.6),
    0 0 20px 4px hsl(270 80% 60% / 0.3),
    inset 0 0 8px 2px hsl(330 100% 70% / 0.3);
}

/* Ring 3 — spinning lightning wheel (multi-color) */
.cc-electric-arc--3 {
  top: -10%;
  left: -10%;
  width: 120%;
  height: 120%;
  background:
    conic-gradient(
      from 0deg,
      transparent 0deg,
      hsl(199 100% 85% / 0.9) 8deg,
      hsl(270 80% 80% / 0.7) 16deg,
      transparent 24deg,
      transparent 60deg,
      hsl(330 100% 80% / 0.9) 68deg,
      hsl(45 100% 75% / 0.7) 76deg,
      transparent 84deg,
      transparent 120deg,
      hsl(180 90% 80% / 0.9) 128deg,
      hsl(199 100% 85% / 0.7) 136deg,
      transparent 144deg,
      transparent 180deg,
      hsl(270 80% 85% / 0.9) 188deg,
      hsl(330 100% 80% / 0.7) 196deg,
      transparent 204deg,
      transparent 240deg,
      hsl(45 100% 80% / 0.9) 248deg,
      hsl(180 90% 75% / 0.7) 256deg,
      transparent 264deg,
      transparent 300deg,
      hsl(199 100% 85% / 0.9) 308deg,
      hsl(330 100% 80% / 0.7) 316deg,
      transparent 324deg,
      transparent 360deg
    );
  animation: cc-arc-spin 0.5s linear forwards;
  filter: blur(0.5px);
}

/* Ring 4 — outer glow flash (multi-color) */
.cc-electric-arc--4 {
  top: -70%;
  left: -70%;
  width: 240%;
  height: 240%;
  background: transparent;
  border: 1.5px solid transparent;
  box-shadow:
    0 0 20px 6px hsl(199 100% 70% / 0.5),
    0 0 35px 10px hsl(330 100% 65% / 0.3),
    0 0 50px 14px hsl(270 80% 60% / 0.15);
  animation: cc-arc-flash 0.45s ease-out forwards;
}

/* Ring 5 — zigzag lightning bolts (SVG-like via border trick) */
.cc-electric-arc--5 {
  top: -40%;
  left: -40%;
  width: 180%;
  height: 180%;
  border: none;
  background:
    conic-gradient(
      from 30deg,
      transparent 0deg,
      hsl(199 100% 90% / 1) 2deg, transparent 4deg,
      transparent 28deg, hsl(330 100% 85% / 1) 30deg, transparent 32deg,
      transparent 58deg, hsl(270 80% 90% / 1) 60deg, transparent 62deg,
      transparent 88deg, hsl(45 100% 85% / 1) 90deg, transparent 92deg,
      transparent 118deg, hsl(180 90% 90% / 1) 120deg, transparent 122deg,
      transparent 148deg, hsl(199 100% 85% / 1) 150deg, transparent 152deg,
      transparent 178deg, hsl(330 100% 90% / 1) 180deg, transparent 182deg,
      transparent 208deg, hsl(270 80% 85% / 1) 210deg, transparent 212deg,
      transparent 238deg, hsl(45 100% 90% / 1) 240deg, transparent 242deg,
      transparent 268deg, hsl(180 90% 85% / 1) 270deg, transparent 272deg,
      transparent 298deg, hsl(199 100% 90% / 1) 300deg, transparent 302deg,
      transparent 328deg, hsl(330 100% 85% / 1) 330deg, transparent 332deg,
      transparent 360deg
    );
  animation: cc-arc-lightning 0.4s ease-out forwards;
  filter: blur(0.3px);
}

/* Ring 6 — pulsing energy wave (alternating colors) */
.cc-electric-arc--6 {
  top: -90%;
  left: -90%;
  width: 280%;
  height: 280%;
  border: 1px solid transparent;
  background: radial-gradient(circle,
    transparent 40%,
    hsl(199 100% 80% / 0.15) 50%,
    hsl(330 100% 75% / 0.1) 55%,
    hsl(270 80% 70% / 0.08) 60%,
    transparent 70%);
  animation: cc-arc-wave 0.7s ease-out forwards;
}

@keyframes cc-arc-pulse-1 {
  0% { transform: scale(0.2); opacity: 1; border-color: hsl(199 100% 80% / 1); }
  30% { transform: scale(0.8); opacity: 0.9; border-color: hsl(199 100% 75% / 0.8); }
  60% { transform: scale(1.3); opacity: 0.6; border-color: hsl(270 80% 70% / 0.5); }
  100% { transform: scale(2); opacity: 0; border-color: hsl(330 100% 70% / 0); }
}

@keyframes cc-arc-pulse-2 {
  0% { transform: scale(0.3) rotate(0deg); opacity: 1; border-color: hsl(330 100% 80% / 1); }
  40% { transform: scale(1) rotate(60deg); opacity: 0.8; border-color: hsl(270 80% 75% / 0.7); }
  70% { transform: scale(1.5) rotate(100deg); opacity: 0.5; border-color: hsl(199 100% 70% / 0.4); }
  100% { transform: scale(2.2) rotate(150deg); opacity: 0; border-color: hsl(199 100% 70% / 0); }
}

@keyframes cc-arc-spin {
  0% { transform: scale(0.3) rotate(0deg); opacity: 1; filter: brightness(2); }
  50% { transform: scale(1.5) rotate(120deg); opacity: 0.8; filter: brightness(1.5); }
  100% { transform: scale(2.5) rotate(240deg); opacity: 0; filter: brightness(1); }
}

@keyframes cc-arc-flash {
  0% { transform: scale(0.15); opacity: 0; }
  15% { opacity: 1; filter: brightness(2.5); }
  40% { transform: scale(0.8); opacity: 0.8; filter: brightness(2); }
  70% { transform: scale(1.2); opacity: 0.4; filter: brightness(1.5); }
  100% { transform: scale(1.8); opacity: 0; filter: brightness(1); }
}

@keyframes cc-arc-lightning {
  0% { transform: scale(0.2) rotate(0deg); opacity: 1; filter: brightness(3); }
  30% { transform: scale(1.2) rotate(15deg); opacity: 0.9; filter: brightness(2); }
  60% { transform: scale(1.8) rotate(30deg); opacity: 0.5; filter: brightness(1.5); }
  100% { transform: scale(2.5) rotate(45deg); opacity: 0; filter: brightness(1); }
}

@keyframes cc-arc-wave {
  0% { transform: scale(0.3); opacity: 0; }
  20% { opacity: 0.8; }
  50% { transform: scale(1); opacity: 0.5; }
  100% { transform: scale(1.8); opacity: 0; }
}


.cyber-gem--ghost {
  opacity: 0.15;
  border: 1px dashed hsl(270 60% 60% / 0.5);
  border-radius: 50%;
  background: transparent !important;
  box-shadow: none !important;
}
.cyber-gem--ghost::before,
.cyber-gem--ghost::after {
  display: none;
}

/* ===== Next piece preview ===== */
.cyber-columns-next {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
  border: 1px solid hsl(270 60% 50% / 0.3);
  border-radius: 0.5rem;
  background: hsl(240 30% 8% / 0.5);
  backdrop-filter: blur(4px);
}

/* ===== Touch controls ===== */
.cyber-columns-touch-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  border-radius: 14px;
  border: 1px solid hsl(270 60% 50% / 0.4);
  background: hsl(240 30% 8% / 0.6);
  color: hsl(270 80% 75%);
  font-size: 1.25rem;
  backdrop-filter: blur(4px);
  transition: all 0.15s ease;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  box-shadow: 0 0 10px hsl(270 60% 50% / 0.1);
}

.cyber-columns-touch-btn:active {
  background: hsl(330 100% 60% / 0.2);
  border-color: hsl(330 100% 60% / 0.5);
  transform: scale(0.92);
  box-shadow: 0 0 15px hsl(330 100% 60% / 0.3);
}

/* ===== Chain combo popup ===== */
.chain-popup {
  animation: chain-pop 0.8s ease-out forwards;
  pointer-events: none;
}

@keyframes chain-pop {
  0%   { transform: translateY(0) scale(0.5); opacity: 0; }
  30%  { transform: translateY(-10px) scale(1.2); opacity: 1; }
  100% { transform: translateY(-40px) scale(1); opacity: 0; }
}

/* ===== Board ripple on match ===== */
.cc-board-ripple {
  position: absolute;
  inset: 0;
  border-radius: 0.75rem;
  animation: cc-ripple 0.6s ease-out forwards;
  pointer-events: none;
}

@keyframes cc-ripple {
  0% { box-shadow: inset 0 0 0 0 hsl(330 100% 60% / 0.3); }
  50% { box-shadow: inset 0 0 30px 5px hsl(330 100% 60% / 0.15); }
  100% { box-shadow: inset 0 0 0 0 hsl(330 100% 60% / 0); }
}

/* ===== HUD glass panel ===== */
.cc-hud-panel {
  background: hsl(240 30% 8% / 0.4);
  backdrop-filter: blur(12px);
  border: 1px solid hsl(270 60% 50% / 0.2);
  border-radius: 0.75rem;
  box-shadow: 0 0 15px hsl(270 40% 30% / 0.1);
}