/* ── Cyber Columns — Galaxy Edition ── */

/* ===== Container & Background ===== */
.cyber-columns-container {
  position: relative;
  overflow: hidden;
  background: radial-gradient(ellipse at 50% 20%, hsl(270 60% 8%) 0%, hsl(240 40% 4%) 40%, hsl(0 0% 0%) 100%);
}

/* Deep space starfield */
.cc-starfield {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.cc-starfield::before,
.cc-starfield::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(1px 1px at 10% 20%, hsl(0 0% 100% / 0.8), transparent),
    radial-gradient(1px 1px at 25% 45%, hsl(0 0% 100% / 0.6), transparent),
    radial-gradient(1.5px 1.5px at 40% 15%, hsl(199 100% 80% / 0.9), transparent),
    radial-gradient(1px 1px at 55% 65%, hsl(0 0% 100% / 0.5), transparent),
    radial-gradient(1px 1px at 70% 30%, hsl(330 100% 80% / 0.7), transparent),
    radial-gradient(1.5px 1.5px at 85% 50%, hsl(0 0% 100% / 0.8), transparent),
    radial-gradient(1px 1px at 15% 75%, hsl(270 80% 80% / 0.6), transparent),
    radial-gradient(1px 1px at 90% 80%, hsl(0 0% 100% / 0.5), transparent),
    radial-gradient(1px 1px at 50% 90%, hsl(199 100% 80% / 0.7), transparent),
    radial-gradient(1.5px 1.5px at 35% 55%, hsl(0 0% 100% / 0.9), transparent),
    radial-gradient(1px 1px at 60% 10%, hsl(0 0% 100% / 0.6), transparent),
    radial-gradient(1px 1px at 75% 85%, hsl(330 80% 80% / 0.5), transparent),
    radial-gradient(1px 1px at 5% 50%, hsl(0 0% 100% / 0.7), transparent),
    radial-gradient(1px 1px at 95% 15%, hsl(0 0% 100% / 0.8), transparent),
    radial-gradient(2px 2px at 48% 35%, hsl(45 100% 80% / 0.9), transparent);
  animation: cc-twinkle 4s ease-in-out infinite alternate;
}

.cc-starfield::after {
  background-image:
    radial-gradient(1px 1px at 20% 30%, hsl(0 0% 100% / 0.6), transparent),
    radial-gradient(1.5px 1.5px at 45% 70%, hsl(199 80% 70% / 0.8), transparent),
    radial-gradient(1px 1px at 65% 20%, hsl(0 0% 100% / 0.7), transparent),
    radial-gradient(1px 1px at 80% 55%, hsl(330 100% 70% / 0.6), transparent),
    radial-gradient(1px 1px at 30% 85%, hsl(0 0% 100% / 0.5), transparent),
    radial-gradient(1px 1px at 55% 40%, hsl(270 80% 70% / 0.7), transparent),
    radial-gradient(2px 2px at 12% 60%, hsl(45 100% 70% / 0.8), transparent),
    radial-gradient(1px 1px at 88% 35%, hsl(0 0% 100% / 0.9), transparent),
    radial-gradient(1px 1px at 42% 5%, hsl(199 100% 90% / 0.6), transparent),
    radial-gradient(1px 1px at 72% 75%, hsl(0 0% 100% / 0.5), transparent);
  animation: cc-twinkle 5s ease-in-out 1s infinite alternate-reverse;
}

@keyframes cc-twinkle {
  0% { opacity: 0.6; }
  100% { opacity: 1; }
}

/* Purple nebula mist */
.cc-nebula {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(ellipse 60% 40% at 30% 30%, hsl(270 60% 25% / 0.25), transparent),
    radial-gradient(ellipse 50% 50% at 70% 60%, hsl(330 60% 20% / 0.2), transparent),
    radial-gradient(ellipse 40% 30% at 50% 80%, hsl(199 60% 20% / 0.15), transparent);
  animation: cc-nebula-drift 12s ease-in-out infinite alternate;
}

@keyframes cc-nebula-drift {
  0% { transform: translate(0, 0) scale(1); opacity: 0.7; }
  100% { transform: translate(10px, -10px) scale(1.05); opacity: 1; }
}

/* Floating particles */
.cc-particles {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.cc-particle {
  position: absolute;
  width: 3px;
  height: 3px;
  border-radius: 50%;
  animation: cc-float-up linear infinite;
}

@keyframes cc-float-up {
  0% { transform: translateY(100vh) scale(0); opacity: 0; }
  10% { opacity: 1; transform: translateY(90vh) scale(1); }
  90% { opacity: 0.6; }
  100% { transform: translateY(-10vh) scale(0.3); opacity: 0; }
}

/* Orbit ring */
.cc-orbit-ring {
  position: absolute;
  top: 15%;
  left: 50%;
  width: 500px;
  height: 160px;
  margin-left: -250px;
  border-radius: 50%;
  border: 1.5px solid hsl(300 80% 60% / 0.15);
  box-shadow:
    0 0 20px hsl(300 80% 60% / 0.1),
    inset 0 0 20px hsl(199 80% 60% / 0.05);
  transform: perspective(600px) rotateX(65deg);
  animation: cc-orbit-spin 20s linear infinite;
  pointer-events: none;
}

@keyframes cc-orbit-spin {
  0% { transform: perspective(600px) rotateX(65deg) rotateZ(0deg); }
  100% { transform: perspective(600px) rotateX(65deg) rotateZ(360deg); }
}

/* ===== Galaxy Title ===== */
.cc-title-cyber {
  font-family: 'Georgia', serif;
  font-style: italic;
  font-weight: 700;
  font-size: 3rem;
  background: linear-gradient(180deg, hsl(330 100% 70%), hsl(330 100% 55%));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 0 15px hsl(330 100% 60% / 0.6)) drop-shadow(0 0 30px hsl(330 100% 60% / 0.3));
  line-height: 1;
}

.cc-title-columns {
  font-family: 'Arial Black', 'Impact', sans-serif;
  font-weight: 900;
  font-size: 3.5rem;
  letter-spacing: 0.1em;
  background: linear-gradient(180deg, hsl(220 80% 80%), hsl(270 60% 60%), hsl(330 80% 60%));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 0 10px hsl(220 80% 70% / 0.5)) drop-shadow(0 2px 0 hsl(0 0% 0% / 0.5));
  line-height: 1.1;
}

/* Title sparkles */
.cc-title-sparkle {
  position: absolute;
  width: 6px;
  height: 6px;
  background: hsl(0 0% 100%);
  border-radius: 50%;
  box-shadow: 0 0 6px 2px hsl(0 0% 100% / 0.8);
  animation: cc-sparkle 2s ease-in-out infinite;
}

@keyframes cc-sparkle {
  0%, 100% { transform: scale(0); opacity: 0; }
  50% { transform: scale(1); opacity: 1; }
}

/* ===== Board Frame — Glass Panel ===== */
.cyber-columns-board {
  position: relative;
  border-radius: 0.75rem;
  background: hsl(240 30% 8% / 0.4);
  backdrop-filter: blur(12px);
  overflow: hidden;
}

/* Gradient neon border */
.cyber-columns-board::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 0.75rem;
  padding: 2px;
  background: linear-gradient(180deg, hsl(199 100% 50% / 0.6), hsl(270 60% 50% / 0.3), hsl(330 100% 60% / 0.6));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

/* Corner glow accents */
.cyber-columns-board::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 0.75rem;
  background:
    radial-gradient(circle at 0% 0%, hsl(199 100% 50% / 0.15), transparent 30%),
    radial-gradient(circle at 100% 0%, hsl(330 100% 60% / 0.15), transparent 30%),
    radial-gradient(circle at 0% 100%, hsl(270 60% 50% / 0.1), transparent 30%),
    radial-gradient(circle at 100% 100%, hsl(199 100% 50% / 0.1), transparent 30%);
  pointer-events: none;
}

/* Grid cell background */
.cc-grid-cell {
  border: 1px solid hsl(220 40% 40% / 0.1);
  background: hsl(220 30% 15% / 0.15);
  border-radius: 3px;
}

/* ===== Gem Styles — Galaxy Edition (Realistic Shiny) ===== */
.cyber-gem {
  position: relative;
  border-radius: 6px;
  transition: opacity 0.15s ease, transform 0.15s ease;
  overflow: hidden;
}

/* Top specular highlight — makes gems look 3D and glassy */
.cyber-gem::after {
  content: '';
  position: absolute;
  top: 6%;
  left: 15%;
  width: 55%;
  height: 38%;
  border-radius: 50%;
  background: linear-gradient(
    180deg,
    hsl(0 0% 100% / 0.7) 0%,
    hsl(0 0% 100% / 0.3) 40%,
    transparent 100%
  );
  pointer-events: none;
  z-index: 2;
}

/* Inner depth + glow pulse */
.cyber-gem::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 6px;
  animation: cc-gem-pulse 2.5s ease-in-out infinite;
  pointer-events: none;
  z-index: 1;
}

@keyframes cc-gem-pulse {
  0%, 100% { box-shadow: inset 0 0 6px hsl(0 0% 100% / 0.08), inset 0 -4px 8px hsl(0 0% 0% / 0.2); }
  50% { box-shadow: inset 0 0 14px hsl(0 0% 100% / 0.3), inset 0 -4px 8px hsl(0 0% 0% / 0.15); }
}

/* ── Plasma Core (Blue) ── */
.cyber-gem--energy {
  background:
    radial-gradient(circle at 35% 30%, hsl(199 100% 85%) 0%, transparent 40%),
    radial-gradient(circle at 60% 70%, hsl(210 100% 30%) 0%, transparent 50%),
    radial-gradient(circle at 50% 50%, hsl(199 100% 55%), hsl(210 100% 35%));
  box-shadow:
    0 0 8px hsl(199 100% 60% / 0.8),
    0 0 18px hsl(199 100% 50% / 0.4),
    inset 0 1px 1px hsl(0 0% 100% / 0.3);
  border: 1px solid hsl(199 100% 70% / 0.4);
}

/* ── Nova Shard (Pink) ── */
.cyber-gem--data {
  background:
    radial-gradient(circle at 35% 30%, hsl(330 100% 88%) 0%, transparent 40%),
    radial-gradient(circle at 60% 70%, hsl(340 100% 35%) 0%, transparent 50%),
    radial-gradient(circle at 50% 50%, hsl(330 100% 65%), hsl(340 100% 40%));
  box-shadow:
    0 0 8px hsl(330 100% 65% / 0.8),
    0 0 18px hsl(330 100% 55% / 0.4),
    inset 0 1px 1px hsl(0 0% 100% / 0.3);
  border: 1px solid hsl(330 100% 75% / 0.4);
}

/* ── Quantum Orb (Purple) ── */
.cyber-gem--quantum {
  background:
    radial-gradient(circle at 35% 30%, hsl(280 80% 82%) 0%, transparent 40%),
    radial-gradient(circle at 60% 70%, hsl(260 80% 30%) 0%, transparent 50%),
    radial-gradient(circle at 50% 50%, hsl(270 80% 58%), hsl(260 80% 35%));
  box-shadow:
    0 0 8px hsl(270 80% 60% / 0.8),
    0 0 18px hsl(270 80% 50% / 0.4),
    inset 0 1px 1px hsl(0 0% 100% / 0.3);
  border: 1px solid hsl(270 80% 70% / 0.4);
}
.cyber-gem--quantum::before {
  background:
    conic-gradient(from 0deg at 50% 50%, hsl(280 80% 70% / 0.12), transparent 30%, hsl(250 80% 60% / 0.08), transparent 60%);
  animation: cc-galaxy-swirl 4s linear infinite;
}

@keyframes cc-galaxy-swirl {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* ── Ion Fragment (Cyan) ── */
.cyber-gem--circuit {
  background:
    radial-gradient(circle at 35% 30%, hsl(180 100% 88%) 0%, transparent 40%),
    radial-gradient(circle at 60% 70%, hsl(190 80% 30%) 0%, transparent 50%),
    radial-gradient(circle at 50% 50%, hsl(180 90% 58%), hsl(190 80% 35%));
  box-shadow:
    0 0 8px hsl(180 90% 55% / 0.8),
    0 0 18px hsl(180 90% 45% / 0.4),
    inset 0 1px 1px hsl(0 0% 100% / 0.3);
  border: 1px solid hsl(180 90% 70% / 0.4);
}

/* ── Stellar Burst (Gold rare) ── */
.cyber-gem--bonus {
  background:
    radial-gradient(circle at 35% 30%, hsl(50 100% 90%) 0%, transparent 35%),
    radial-gradient(circle at 60% 70%, hsl(35 100% 35%) 0%, transparent 50%),
    radial-gradient(circle at 50% 50%, hsl(45 100% 65%), hsl(35 100% 40%));
  box-shadow:
    0 0 10px hsl(45 100% 55% / 0.9),
    0 0 24px hsl(45 100% 50% / 0.5),
    0 0 40px hsl(45 100% 45% / 0.2),
    inset 0 1px 1px hsl(0 0% 100% / 0.4);
  border: 1px solid hsl(45 100% 75% / 0.5);
}
.cyber-gem--bonus::before {
  animation: cc-gem-pulse 1s ease-in-out infinite;
}

/* ===== Burst particle effect on match ===== */
.cyber-gem--clearing {
  animation: cc-gem-explode 0.45s ease-out forwards;
}

.cyber-gem--clearing::before {
  animation: cc-burst-ring 0.5s ease-out forwards !important;
  background: hsl(0 0% 100% / 0.6) !important;
  border-radius: 50% !important;
  inset: -50% !important;
}

@keyframes cc-burst-ring {
  0% { transform: scale(0.2); opacity: 1; }
  60% { transform: scale(2.5); opacity: 0.5; }
  100% { transform: scale(3.5); opacity: 0; }
}

/* Burst sparkle rays */
.cyber-gem--clearing::after {
  animation: cc-burst-sparkle 0.45s ease-out forwards !important;
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  border-radius: 0 !important;
  background:
    radial-gradient(circle at 20% 20%, hsl(0 0% 100%) 1px, transparent 2px),
    radial-gradient(circle at 80% 15%, hsl(0 0% 100%) 1px, transparent 2px),
    radial-gradient(circle at 85% 80%, hsl(0 0% 100%) 1px, transparent 2px),
    radial-gradient(circle at 15% 75%, hsl(0 0% 100%) 1px, transparent 2px),
    radial-gradient(circle at 50% 5%, hsl(0 0% 100%) 1px, transparent 2px),
    radial-gradient(circle at 50% 95%, hsl(0 0% 100%) 1px, transparent 2px) !important;
}

/* ===== Active piece — subtle falling trail ===== */
.cc-gem-active {
  animation: cc-gem-enter 0.15s ease-out;
}

@keyframes cc-gem-enter {
  0% { opacity: 0.7; transform: translateY(-2px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes cc-gem-explode {
  0% { transform: scale(1); opacity: 1; filter: brightness(1); }
  20% { transform: scale(1.5); filter: brightness(2.5); }
  40% { transform: scale(1.3); opacity: 0.8; filter: brightness(2); }
  100% { transform: scale(0); opacity: 0; filter: brightness(4); }
}

@keyframes cc-burst-sparkle {
  0% { transform: scale(0.5); opacity: 1; }
  100% { transform: scale(2.5); opacity: 0; }
}

/* Match flash overlay */
.cc-match-flash {
  position: absolute;
  inset: 0;
  border-radius: 5px;
  background: hsl(0 0% 100% / 0.8);
  animation: cc-flash 0.3s ease-out forwards;
  pointer-events: none;
}

@keyframes cc-flash {
  0% { opacity: 1; }
  100% { opacity: 0; }
}

/* ===== Ghost / drop preview ===== */
.cyber-gem--ghost {
  opacity: 0.15;
  border: 1px dashed currentColor;
  background: transparent !important;
  box-shadow: none !important;
}
.cyber-gem--ghost::before,
.cyber-gem--ghost::after {
  display: none;
}

/* ===== Next piece preview ===== */
.cyber-columns-next {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
  border: 1px solid hsl(270 60% 50% / 0.3);
  border-radius: 0.5rem;
  background: hsl(240 30% 8% / 0.5);
  backdrop-filter: blur(4px);
}

/* ===== Touch controls ===== */
.cyber-columns-touch-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  border-radius: 14px;
  border: 1px solid hsl(270 60% 50% / 0.4);
  background: hsl(240 30% 8% / 0.6);
  color: hsl(270 80% 75%);
  font-size: 1.25rem;
  backdrop-filter: blur(4px);
  transition: all 0.15s ease;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  box-shadow: 0 0 10px hsl(270 60% 50% / 0.1);
}

.cyber-columns-touch-btn:active {
  background: hsl(330 100% 60% / 0.2);
  border-color: hsl(330 100% 60% / 0.5);
  transform: scale(0.92);
  box-shadow: 0 0 15px hsl(330 100% 60% / 0.3);
}

/* ===== Chain combo popup ===== */
.chain-popup {
  animation: chain-pop 0.8s ease-out forwards;
  pointer-events: none;
}

@keyframes chain-pop {
  0%   { transform: translateY(0) scale(0.5); opacity: 0; }
  30%  { transform: translateY(-10px) scale(1.2); opacity: 1; }
  100% { transform: translateY(-40px) scale(1); opacity: 0; }
}

/* ===== Board ripple on match ===== */
.cc-board-ripple {
  position: absolute;
  inset: 0;
  border-radius: 0.75rem;
  animation: cc-ripple 0.6s ease-out forwards;
  pointer-events: none;
}

@keyframes cc-ripple {
  0% { box-shadow: inset 0 0 0 0 hsl(330 100% 60% / 0.3); }
  50% { box-shadow: inset 0 0 30px 5px hsl(330 100% 60% / 0.15); }
  100% { box-shadow: inset 0 0 0 0 hsl(330 100% 60% / 0); }
}

/* ===== HUD glass panel ===== */
.cc-hud-panel {
  background: hsl(240 30% 8% / 0.4);
  backdrop-filter: blur(12px);
  border: 1px solid hsl(270 60% 50% / 0.2);
  border-radius: 0.75rem;
  box-shadow: 0 0 15px hsl(270 40% 30% / 0.1);
}
